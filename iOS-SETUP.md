# iOS Setup Guide for Deep Research Multi-APIs

This guide explains how to set up and use the Deep Research script on iOS devices with iOS Shortcuts.

## iOS Compatibility

The script has been optimized for iOS 18.6+ and works with:
- **a-Shell** - Free terminal app for iOS
- **iSH** - Linux shell for iOS
- **iOS Shortcuts** - Apple's automation app

## Installation on iOS

### Option 1: Using a-Shell (Recommended)

1. **Install a-Shell from App Store**
   - Download "a-Shell" (free) from the App Store
   - Open a-Shell and run initial setup

2. **Install Node.js and dependencies**
   ```bash
   # In a-Shell
   pkg install nodejs npm
   
   # Navigate to your working directory
   cd Documents
   
   # Clone or download the repository files
   # (You'll need to transfer the files via Files app or other method)
   ```

3. **Install dependencies**
   ```bash
   npm install
   ```

4. **Configure API keys**
   ```bash
   # Create .env file
   echo "BRAVE_API_KEY=your_brave_key_here" > .env
   echo "NEWS_API_KEY=your_news_key_here" >> .env  
   echo "NEWSDATA_API_KEY=your_newsdata_key_here" >> .env
   ```

### Option 2: Using iSH

1. **Install iSH from App Store**
2. **Install Node.js**
   ```bash
   apk add nodejs npm
   ```
3. **Follow similar setup steps as a-Shell**

## iOS Shortcuts Integration

### Basic Clipboard-to-Clipboard Shortcut

1. **Open iOS Shortcuts app**
2. **Create new shortcut**
3. **Add these actions:**

   **Step 1: Run Shell Script**
   - Action: "Run Shell Script"
   - Shell: Select your terminal app (a-Shell or iSH)
   - Script: 
   ```bash
   cd /path/to/your/project
   node shortcutsResearch.js
   ```
   - Pass input: "to stdin"

   **Step 2: Get Clipboard**
   - Action: "Get Clipboard"
   - This provides the search query

   **Step 3: Show Result**
   - Action: "Show Result" 
   - This will show the copied results

4. **Save shortcut with a name like "Deep Research"**

### Advanced Shortcut with Input

For more control, create a shortcut that:

1. **Gets text input** (from share sheet, Siri, or manual entry)
2. **Copies text to clipboard**
3. **Runs the research script**
4. **Shows results**

**Shortcut Actions:**
```
1. Get Text from Input
2. Copy to Clipboard
3. Run Shell Script: "cd /your/path && node shortcutsResearch.js"
4. Get Clipboard (the results)
5. Show Result / Share / Quick Look
```

## Usage Examples

### Using the iOS-optimized script directly:

```bash
# Default: read from clipboard, search, write results to clipboard
node iosResearch.js

# Same as above (explicit)
node iosResearch.js --clipboard

# Search with specific query
node iosResearch.js "artificial intelligence"

# Test clipboard access
node iosResearch.js --test-clipboard

# View configuration
node iosResearch.js --config
```

### Using the Shortcuts wrapper:

```bash
# This is specifically for iOS Shortcuts
node shortcutsResearch.js
```

## iOS-Specific Features

### Optimizations for iOS

- **Reduced resource usage**: Fewer simultaneous API calls
- **Shorter timeouts**: Optimized for mobile networks  
- **No desktop notifications**: Uses console logging instead
- **Flexible file paths**: Works with iOS file system restrictions
- **Error resilience**: Handles network issues gracefully

### Clipboard Workflow

The iOS version is designed around a simple workflow:

1. **Copy search query** to clipboard (manually or via Siri)
2. **Run the script** (via shortcut or terminal)
3. **Get results** from clipboard (formatted for easy reading)

### Output Format

Results are formatted specifically for iOS:

```
ðŸ” Deep Research Results
Query: "your search query"
ðŸ“… Nov 15, 2024, 2:30 PM
ðŸ“Š Total Results: 25

ðŸ¦ BRAVESEARCH (10 results)
========================================
1. Article Title Here
   ðŸ”— https://example.com/article
   ðŸ“ Brief description of the article...

ðŸ“° NEWSAPI (15 results)  
========================================
1. News Article Title
   ðŸ”— https://news.example.com
   ðŸ“ News article description...

âŒ ERRORS
========================================
â€¢ someAPI: Rate limit exceeded

ðŸ¤– Generated by iOS Deep Research v1.0
```

## Troubleshooting

### Common Issues

**"Clipboard access failed"**
- Make sure your terminal app has clipboard permissions
- In iOS Settings > Privacy & Security > Accessibility, enable clipboard access

**"API key not configured"**
- Check your .env file has the correct API keys
- Make sure the .env file is in the same directory as the script

**"Network timeout"**
- iOS networks can be slower; the script uses longer timeouts
- Try again on a better network connection

**"Command not found"**
- Make sure Node.js is properly installed in your terminal app
- Check that you're in the correct directory

### iOS-Specific Limitations

- **File system access**: Limited to app containers and Documents folder
- **Background execution**: iOS may terminate long-running processes
- **Network restrictions**: Cellular networks may have different timeouts
- **Memory limits**: iOS aggressively manages app memory

## Shortcuts Examples

### Siri Integration

Create a shortcut that:
1. Takes Siri voice input
2. Copies to clipboard  
3. Runs research
4. Speaks results summary

### Share Sheet Integration

Create a shortcut that:
1. Receives text from share sheet
2. Researches the shared text
3. Returns formatted results

### Widget Integration

Create a widget shortcut that:
1. Uses predefined queries
2. Shows quick research results
3. Opens full results when tapped

## Performance Tips

- **Use fewer APIs** on cellular networks to save data
- **Cache results** by saving to Files app when needed
- **Use specific queries** rather than very broad searches
- **Monitor data usage** as API calls consume cellular data

## Security Notes

- **API keys**: Store securely in .env file, never in shortcuts directly
- **Clipboard data**: Be aware that clipboard content is accessible to the script
- **Network traffic**: All API calls are made over HTTPS
- **Local storage**: Logs and config files stay on device

## Getting API Keys

See the main README.md for detailed instructions on getting API keys from:
- Brave Search API
- NewsAPI.org  
- Newsdata.io

All APIs offer free tiers suitable for personal use on iOS.